<%- include ("../../partials/header", { title: currentUser.displayName }) -%>
<%- include ("../../partials/navbar") %>
<%- include ("../../partials/title", { maintitle: 'Management', subtitle: 'Staff: ' + currentUser.displayName }) %>

<div class="row justify-content-center my-5">
    <div class="col-md-10">
        <!-- Users -->
        <% if (user) { %>
        <div class="row justify-content-center my-5">
            <div class="col-10">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title"><%= user.displayName %></h5>
                        <h6 class="card-subtitle mb-2 text-muted"><%= user.username %></h6>
                        <p class="card-text">Email: <%= user.email %></p>
                        <p class="card-text">Status: <%= account.status %></p>
                        <% if (account.status === 'LOCKED') { %>
                        <a href="/admin/users/<%= user.id %>/lock"
                           class="card-link btn btn-danger">Unlock</a>
                        <% } else if (account.status === 'ACTIVE') { %>
                        <a href="/admin/users/<%= user.id %>/lock"
                           class="card-link btn btn-danger">Lock</a>
                        <% } %>
                        <a href="/admin/users/<%= user.id %>/transaction"
                           class="card-link btn btn-info">Transaction</a>
                        <a href="/admin/users/<%= user.id %>/modify"
                           class="card-link btn btn-warning">Modify</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- If user is needing verification -->
        <% if (account.status === 'PENDING' || account.status === 'DENIED') { %>
        <div class="row justify-content-center my-5">
            <div class="card mb-3">
                <img src="/uploads/<%= user.idCardPhoto %>" class="card-img-top"
                     alt="<%= user.idCardPhoto %>">
                <div class="card-body">
                    <a href="/admin/users/<%= user.id %>/verify-accept"
                       class="btn btn-primary">Accept</a>
                    <a href="/admin/users/<%= user.id %>/verify-deny"
                       class="btn btn-danger">Deny</a>
                </div>
            </div>
        </div>
        <% } %>

        <!-- If checking transaction --> <!-- Marked -->
        <% if (transactions) { %>
        <ul class="list-group">
            <% transactions.forEach(trans => { %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                trans.accountNumber
                <span class="badge badge-primary badge-pill">2</span>
            </li>
            <% }) %>
        </ul>
        <% } else { %>
        <i>No transaction yet</i>
        <% } %>

        <% } %>
        <div class="row my-3 justify-content-end">
            <div class="col-4">
                <a class="btn btn-light" href="/admin/users" role="button">Back</a>
            </div>
        </div>
        <!-- End Users -->
    </div>
</div>

<%- include ("../../partials/footer") -%>